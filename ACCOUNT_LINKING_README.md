# ميزة ربط الحسابات بالصفحات

## الوصف
تم إضافة ميزة جديدة لربط الحسابات في دليل الحسابات الشجري بصفحات النظام المختلفة (العملاء، الموردين، الصناديق، البنوك). هذه الميزة تتيح:

1. **ربط الحساب بصفحة معينة** عند إضافة حساب فرعي جديد
2. **إدخال البيانات التفصيلية** المناسبة للصفحة المختارة
3. **حفظ البيانات تلقائياً** في الصفحة المرتبطة عند حفظ الحساب
4. **عرض معلومات الربط** في تفاصيل الحساب

## الصفحات المدعومة

### 1. صفحة العملاء
- اسم العميل (عربي) *
- رقم الهاتف *
- البريد الإلكتروني
- نوع العمل (شركة/مؤسسة/فرد)

### 2. صفحة الموردين
- اسم المورد *
- رقم الشركة
- رقم الهاتف *
- العنوان

### 3. صفحة الصناديق
- اسم الصندوق (عربي) *
- اسم الصندوق (إنجليزي) *
- الفرع

### 4. صفحة البنوك
- اسم البنك (عربي) *
- اسم البنك (إنجليزي) *
- الفرع

## كيفية الاستخدام

### إضافة حساب مربوط بصفحة:

1. **اختر حساب أب** من الشجرة (يجب أن يكون له حسابات تحليلية)
2. **اضغط على "إضافة حساب فرعي"**
3. **املأ بيانات الحساب الأساسية:**
   - اسم الحساب (عربي)
   - اسم الحساب (إنجليزي)
   - إعدادات الحساب (له حسابات تحليلية)
4. **اختر الصفحة المرتبطة:**
   - حدد أحد الخيارات: العملاء، الموردين، الصناديق، أو البنوك
5. **املأ البيانات التفصيلية** التي ستظهر حسب الصفحة المختارة
6. **احفظ الحساب** - سيتم حفظ البيانات في الصفحة المرتبطة تلقائياً

### عرض معلومات الربط:

- عند تحديد حساب مربوط بصفحة، ستظهر معلومات الربط في أسفل تفاصيل الحساب
- تشمل نوع الصفحة والبيانات المحفوظة

## التحديثات التقنية

### ملف `accountsService.ts`:
```typescript
export interface Account {
  // ... الخصائص الموجودة
  
  // الخصائص الجديدة
  linkedToPage?: 'customers' | 'suppliers' | 'cashboxes' | 'banks';
  customerData?: {
    nameAr?: string;
    phone?: string;
    email?: string;
    businessType?: string;
  };
  supplierData?: {
    name?: string;
    companyNumber?: string;
    phone?: string;
    address?: string;
  };
  cashboxData?: {
    nameAr?: string;
    nameEn?: string;
    branch?: string;
  };
  bankData?: {
    arabicName?: string;
    englishName?: string;
    branch?: string;
  };
}
```

### ملف `ChartOfAccountsPage.tsx`:
- تم إضافة واجهة اختيار نوع الصفحة
- تم إضافة نماذج إدخال البيانات التفصيلية
- تم إضافة دالة `saveLinkedPageData()` لحفظ البيانات في الصفحات المختلفة
- تم إضافة عرض معلومات الربط في تفاصيل الحساب

## الفوائد

1. **توفير الوقت**: إدخال البيانات مرة واحدة بدلاً من إدخالها في مكانين منفصلين
2. **ضمان التكامل**: ربط تلقائي بين الحسابات والصفحات ذات الصلة
3. **سهولة الإدارة**: عرض واضح للحسابات المرتبطة بالصفحات
4. **منع الأخطاء**: تقليل فرص الخطأ في الإدخال المزدوج

## ملاحظات مهمة

- يمكن ربط الحساب بصفحة واحدة فقط في كل مرة
- البيانات المطلوبة (المميزة بـ *) يجب إدخالها لضمان الحفظ الصحيح
- عند تغيير نوع الصفحة، يتم مسح البيانات المدخلة مسبقاً
- تظهر رسالة تأكيد تشير إلى نجاح حفظ البيانات في الصفحة المرتبطة

## المتطلبات

- Firebase Firestore للتخزين
- جميع مجموعات البيانات (customers, suppliers, cashBoxes, bankAccounts) يجب أن تكون موجودة في قاعدة البيانات

## التطوير المستقبلي

يمكن توسيع هذه الميزة لتشمل:
- المزيد من أنواع الصفحات
- تعديل البيانات المرتبطة من نفس الواجهة
- تزامن التغييرات بين الحساب والصفحة المرتبطة
- تقارير للحسابات المرتبطة
